<!doctype html>
<html lang="nl">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Health Dashboard</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <main class="app">
      <header class="topbar">
        <div class="brand">
          <div class="title">Health / Workout Dashboard</div>
          <div class="subtitle" id="scheduleSubtitle">Mo/Wed/Fri schedule. Past 1 week + next 2 weeks.</div>
        </div>
        <button class="btn ghost small" id="settingsBtn" type="button">Settings</button>
      </header>

      <div class="main-grid">
        <section class="panel schedule-panel">
          <div class="panel-header">
            <div>
              <h2>Schedule</h2>
              <div class="panel-sub" id="rangeLabel"></div>
            </div>
            <button class="btn ghost small" id="showPastBtn">Show earlier</button>
          </div>
          <div id="schedule" class="schedule-grid"></div>
          <div class="schedule-footer">
            <button class="btn ghost small" id="showMoreBtn">Show later</button>
          </div>
        </section>

        <aside class="insights">
          <section class="panel summary-panel">
            <div class="panel-header">
              <div>
                <h2>Summary</h2>
                <div class="panel-sub">Auto-updates as you log</div>
              </div>
            </div>
            <div class="summary-grid">
              <div class="summary-card">
                <div class="summary-title">Workouts (7d)</div>
                <div class="summary-value" data-summary="workouts7">0/0</div>
                <div class="summary-sub" data-summary="workouts7Sub">planned</div>
              </div>
              <div class="summary-card">
                <div class="summary-title">Cardio minutes (7d)</div>
                <div class="summary-value" data-summary="cardio7">0 min</div>
                <div class="summary-sub">Cycling + walking</div>
              </div>
              <div class="summary-card">
                <div class="summary-title">Est. burn (7d)</div>
                <div class="summary-value" data-summary="burn7">0 kcal</div>
                <div class="summary-sub">From logged data</div>
              </div>
              <div class="summary-card">
                <div class="summary-title">Weight trend</div>
                <div class="summary-value" data-summary="weightLatest">--</div>
                <div class="summary-sub" data-summary="weightDelta">No data yet</div>
              </div>
            </div>
            <div class="calendar-wrap">
              <div class="chart-title" id="calendarYearLabel">calendar</div>
              <div class="year-grid" id="yearCalendar"></div>
            </div>
          </section>

          <section class="panel charts-panel">
            <div class="panel-header">
              <div>
                <h2>Progress</h2>
                <div class="panel-sub">Weight, fat, muscle, and training output</div>
              </div>
            </div>
            <div class="chart-wrap">
              <div class="chart-title">Body metrics</div>
              <canvas id="bodyChart"></canvas>
              <div class="chart-legend">
                <span class="legend-item"><span class="swatch weight"></span>Weight (kg)</span>
                <span class="legend-item"><span class="swatch fat"></span>Fat %</span>
                <span class="legend-item"><span class="swatch muscle"></span>Muscle %</span>
              </div>
            </div>
            <div class="chart-wrap">
              <div class="chart-title">Estimated kcal</div>
              <canvas id="calorieChart"></canvas>
            </div>
          </section>

          <section class="panel metrics-panel">
            <div class="panel-header">
              <div>
                <h2>Body metrics entry</h2>
                <div class="panel-sub">Weight, fat %, muscle %</div>
              </div>
            </div>
            <div class="metrics-entry">
              <label class="static-label">
                Height (cm)
                <div class="static-field" id="heightDisplay">Not set</div>
              </label>
              <label>
                Date
                <input type="date" id="metricDate" lang="nl">
              </label>
              <label>
                Weight (kg)
                <input type="number" step="0.1" min="0" id="metricWeight" inputmode="decimal">
              </label>
              <label>
                Fat %
                <input type="number" step="0.1" min="0" max="100" id="metricFat" inputmode="decimal">
              </label>
              <label>
                Muscle %
                <input type="number" step="0.1" min="0" max="100" id="metricMuscle" inputmode="decimal">
              </label>
              <button class="btn" id="metricSave">Save</button>
            </div>
            <div class="metrics-table" id="metricsTable"></div>
          </section>
        </aside>
      </div>
    </main>

    <div class="settings-overlay is-hidden" id="settingsOverlay" aria-hidden="true">
      <div class="settings-panel" id="settingsPanel" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
        <div class="settings-header">
          <h3 id="settingsTitle">Settings</h3>
          <button class="btn ghost small" type="button" data-action="close-settings">Close</button>
        </div>
        <div class="settings-body">
          <section class="settings-section">
            <div class="settings-section-title">Profile</div>
            <div class="settings-grid">
              <label>
                Height (cm)
                <input type="number" min="0" step="0.1" inputmode="decimal" id="settingsHeight" data-profile-field="heightCm">
              </label>
            </div>
            <div class="settings-help">Used to estimate kcal burn when logs are missing.</div>
          </section>

          <section class="settings-section">
            <div class="settings-section-title">Workout schedule</div>
            <div class="settings-days" id="settingsDays"></div>
            <div class="settings-grid">
              <label>
                Past weeks visible
                <input type="number" min="0" step="1" inputmode="numeric" id="settingsPastWeeks" data-config-field="defaultPastWeeks">
              </label>
              <label>
                Future weeks visible
                <input type="number" min="0" step="1" inputmode="numeric" id="settingsFutureWeeks" data-config-field="defaultFutureWeeks">
              </label>
            </div>
          </section>

          <section class="settings-section">
            <div class="settings-section-title">Exercises</div>
            <div class="settings-help">
              Formula is kcal per rep. Use bw for body weight (kg) and load for external weight (kg). If load is not used, the exercise is treated as bodyweight only. Example: 0.006 * (load + 0.1 * bw)
            </div>
            <div class="settings-exercises" id="settingsExercises"></div>
          </section>

          <section class="settings-section">
            <div class="settings-section-title">Display</div>
            <label class="toggle-row">
              <input type="checkbox" id="settingsDarkMode" data-config-field="darkMode">
              <span>Dark mode</span>
            </label>
          </section>

          <div class="settings-footer">Changes save automatically.</div>
        </div>
      </div>
    </div>

    <div class="profile-overlay is-hidden" id="profileOverlay" aria-hidden="true">
      <div class="profile-panel" role="dialog" aria-modal="true" aria-labelledby="profileTitle">
        <h3 id="profileTitle">Finish your profile</h3>
        <p id="profileMessage">Add missing details to improve kcal estimates.</p>
        <div class="settings-grid">
          <label>
            Height (cm)
            <input type="number" min="0" step="0.1" inputmode="decimal" id="profileHeight" data-profile-field="heightCm">
          </label>
          <label id="profileWeightRow">
            Starting weight (kg)
            <input type="number" min="0" step="0.1" inputmode="decimal" id="profileWeight" data-profile-weight="true">
          </label>
        </div>
        <div class="profile-actions">
          <button class="btn ghost small" type="button" data-action="close-profile">Not now</button>
          <button class="btn small" type="button" data-action="open-settings">Open settings</button>
        </div>
      </div>
    </div>

    <div class="toast is-hidden" id="settingsToast" role="status" aria-live="polite">Settings saved</div>

    <script src="app.js"></script>
  </body>
</html>
