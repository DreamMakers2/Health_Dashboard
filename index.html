<!doctype html>
<html lang="nl">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Health Dashboard</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <main class="app">
      <header class="topbar">
        <div class="brand">
          <div class="title">Health / Workout Dashboard</div>
          <div class="subtitle" id="scheduleSubtitle">Mo/Wed/Fri schedule. Past 1 week + next 2 weeks.</div>
        </div>
        <button class="btn ghost small" id="settingsBtn" type="button">Settings</button>
      </header>

      <div class="main-grid">
        <section class="panel schedule-panel">
          <div class="panel-header">
            <div>
              <h2>Schedule</h2>
              <div class="panel-sub" id="rangeLabel"></div>
            </div>
            <button class="btn ghost small" id="showPastBtn">Show earlier</button>
          </div>
          <div id="schedule" class="schedule-grid"></div>
          <div class="schedule-footer">
            <button class="btn ghost small" id="showMoreBtn">Show later</button>
          </div>
        </section>

        <aside class="insights">
          <section class="panel summary-panel">
            <div class="calendar-wrap">
              <div class="chart-title" id="calendarYearLabel">calendar</div>
              <div class="year-grid" id="yearCalendar"></div>
            </div>
          </section>

          <section class="panel charts-panel">
            <div class="panel-header">
              <div>
                <h2>Progress</h2>
                <div class="panel-sub" id="progressSubtitle">Weight, fat, muscle, and training output</div>
              </div>
              <div class="range-toggle" id="progressRange">
                <button class="range-btn" type="button" data-range="30">30 days</button>
                <button class="range-btn" type="button" data-range="90">90 days</button>
                <button class="range-btn" type="button" data-range="all">All-time</button>
              </div>
            </div>
            <div class="progress-grid">
              <div class="summary-card">
                <div class="summary-title">Weight change</div>
                <div class="summary-value" data-progress="weightChange30">--</div>
                <div class="summary-sub" data-progress="weightChange30Sub">No weight data</div>
              </div>
              <div class="summary-card">
                <div class="summary-title">Fat change</div>
                <div class="summary-value" data-progress="fatChange30">--</div>
                <div class="summary-sub" data-progress="fatChange30Sub">No fat data</div>
              </div>
              <div class="summary-card">
                <div class="summary-title">Muscle change</div>
                <div class="summary-value" data-progress="muscleChange30">--</div>
                <div class="summary-sub" data-progress="muscleChange30Sub">No muscle data</div>
              </div>
              <div class="summary-card">
                <div class="summary-title">Training load</div>
                <div class="summary-value" data-progress="load30">0 kcal</div>
                <div class="summary-sub" data-progress="load30Sub">Avg per workout</div>
              </div>
              <div class="summary-card">
                <div class="summary-title">Completion</div>
                <div class="summary-value" data-progress="completion30">0/0</div>
                <div class="summary-sub" data-progress="completion30Sub">Scheduled</div>
              </div>
              <div class="summary-card">
                <div class="summary-title">Best workout</div>
                <div class="summary-value" data-progress="bestWorkout30">--</div>
                <div class="summary-sub" data-progress="bestWorkout30Sub">No workouts yet</div>
              </div>
            </div>
            <div class="progress-notes">
              <div class="chart-title" id="progressHighlightTitle">Highlights</div>
              <div class="summary-lines">
                <div class="summary-line" data-progress="progressActive"></div>
                <div class="summary-line" data-progress="progressCardio"></div>
                <div class="summary-line" data-progress="progressStrength"></div>
                <div class="summary-line" data-progress="progressWeightRange"></div>
              </div>
            </div>
            <div class="chart-wrap">
              <div class="chart-title">Body metrics</div>
              <canvas id="bodyChart"></canvas>
              <div class="chart-legend">
                <span class="legend-item"><span class="swatch weight"></span>Weight (kg)</span>
                <span class="legend-item"><span class="swatch fat"></span>Fat %</span>
                <span class="legend-item"><span class="swatch muscle"></span>Muscle %</span>
              </div>
              <div class="chart-values" id="bodyChartValues">
                <div class="chart-value">
                  <span>Latest</span>
                  <strong data-body-value="date">--</strong>
                </div>
                <div class="chart-value">
                  <span>Weight</span>
                  <strong data-body-value="weight">--</strong>
                </div>
                <div class="chart-value">
                  <span>Fat</span>
                  <strong data-body-value="fat">--</strong>
                </div>
                <div class="chart-value">
                  <span>Muscle</span>
                  <strong data-body-value="muscle">--</strong>
                </div>
              </div>
            </div>
          </section>

          <section class="panel metrics-panel">
            <div class="panel-header">
              <div>
                <h2>Body metrics entry</h2>
                <div class="panel-sub">Add new entry</div>
              </div>
            </div>
            <div class="metrics-entry">
              <label>
                <span class="sr-only">Date</span>
                <input type="date" id="metricDate" lang="nl">
              </label>
              <label>
                <span class="sr-only">Weight (kg)</span>
                <div class="unit-field">
                  <input type="number" step="0.1" min="0" id="metricWeight" inputmode="decimal">
                  <span class="unit-label">kg</span>
                </div>
              </label>
              <label>
                <span class="sr-only">% fat</span>
                <div class="unit-field wide">
                  <input type="number" step="0.1" min="0" max="100" id="metricFat" inputmode="decimal">
                  <span class="unit-label">% fat</span>
                </div>
              </label>
              <label>
                <span class="sr-only">% muscle</span>
                <div class="unit-field wide">
                  <input type="number" step="0.1" min="0" max="100" id="metricMuscle" inputmode="decimal">
                  <span class="unit-label">% muscle</span>
                </div>
              </label>
              <button class="btn" id="metricSave">Save</button>
            </div>
            <div class="metrics-table" id="metricsTable"></div>
          </section>
        </aside>
      </div>
    </main>

    <div class="settings-overlay is-hidden" id="settingsOverlay" aria-hidden="true">
      <div class="settings-panel" id="settingsPanel" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
        <div class="settings-header">
          <h3 id="settingsTitle">Settings</h3>
          <button class="btn ghost small" type="button" data-action="close-settings">Close</button>
        </div>
        <div class="settings-body">
          <section class="settings-section">
            <div class="settings-section-title">Profile</div>
            <div class="settings-grid">
              <label>
                Height (cm)
                <input type="number" min="0" step="0.1" inputmode="decimal" id="settingsHeight" data-profile-field="heightCm">
              </label>
            </div>
            <div class="settings-help">Used to estimate kcal burn when logs are missing.</div>
          </section>

          <section class="settings-section">
            <div class="settings-section-title">Workout schedule</div>
            <div class="settings-days" id="settingsDays"></div>
            <div class="settings-grid">
              <label>
                Past weeks visible
                <input type="number" min="0" step="1" inputmode="numeric" id="settingsPastWeeks" data-config-field="defaultPastWeeks">
              </label>
              <label>
                Future weeks visible
                <input type="number" min="0" step="1" inputmode="numeric" id="settingsFutureWeeks" data-config-field="defaultFutureWeeks">
              </label>
            </div>
          </section>

          <section class="settings-section">
            <div class="settings-section-title">Exercises</div>
            <div class="settings-help">
              Formula is kcal per rep. Use bw for body weight (kg) and load for external weight (kg). If load is not used, the exercise is treated as bodyweight only. Example: 0.006 * (load + 0.1 * bw)
            </div>
            <div class="settings-exercises" id="settingsExercises"></div>
          </section>

          <section class="settings-section">
            <div class="settings-section-title">Display</div>
            <label class="toggle-row">
              <input type="checkbox" id="settingsDarkMode" data-config-field="darkMode">
              <span>Dark mode</span>
            </label>
          </section>

          <div class="settings-footer">Changes save automatically.</div>
        </div>
      </div>
    </div>

    <div class="profile-overlay is-hidden" id="profileOverlay" aria-hidden="true">
      <div class="profile-panel" role="dialog" aria-modal="true" aria-labelledby="profileTitle">
        <h3 id="profileTitle">Finish your profile</h3>
        <p id="profileMessage">Add missing details to improve kcal estimates.</p>
        <div class="settings-grid">
          <label>
            Height (cm)
            <input type="number" min="0" step="0.1" inputmode="decimal" id="profileHeight" data-profile-field="heightCm">
          </label>
          <label id="profileWeightRow">
            Starting weight (kg)
            <input type="number" min="0" step="0.1" inputmode="decimal" id="profileWeight" data-profile-weight="true">
          </label>
        </div>
        <div class="profile-actions">
          <button class="btn ghost small" type="button" data-action="close-profile">Not now</button>
          <button class="btn small" type="button" data-action="open-settings">Open settings</button>
        </div>
      </div>
    </div>

    <div class="toast is-hidden" id="settingsToast" role="status" aria-live="polite">Settings saved</div>

    <script src="app.js"></script>
  </body>
</html>
